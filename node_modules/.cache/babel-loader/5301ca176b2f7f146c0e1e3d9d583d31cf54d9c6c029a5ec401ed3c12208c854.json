{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zoe/Desktop/Independent/cat/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/zoe/Desktop/Independent/cat/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/zoe/Desktop/Independent/cat/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DateRangeForm(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),billingDate=_useState2[0],setBillingDate=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedDateRange=_useState4[0],setSelectedDateRange=_useState4[1];var _useState5=useState([{startDate:\"\",label:\"Choose date\"}]),_useState6=_slicedToArray(_useState5,2),options=_useState6[0],setOptions=_useState6[1];var _useState7=useState(localStorage.getItem(\"startDate\")),_useState8=_slicedToArray(_useState7,2),startDate=_useState8[0],setStartDate=_useState8[1];var _useState9=useState(localStorage.getItem(\"endDate\")),_useState10=_slicedToArray(_useState9,2),endDate=_useState10[0],setEndDate=_useState10[1];useEffect(function(){var fetchBillingDate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var sessionEmail,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sessionEmail=localStorage.getItem(\"email\");_context.next=3;return axios.post('https://www.zoelindev.com/moneyCatBackend/dateRangeForm.php',{email:sessionEmail});case 3:response=_context.sent;data=response.data;setBillingDate(data.billing);case 6:case\"end\":return _context.stop();}},_callee);}));return function fetchBillingDate(){return _ref.apply(this,arguments);};}();fetchBillingDate();},[]);useEffect(function(){if(billingDate){var monthNames=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var _options=[];for(var i=0;i<13;i++){var _now=new Date();var monthStartDate=new Date(_now.getFullYear(),_now.getMonth()+i-1,billingDate);var monthEndDate=new Date(_now.getFullYear(),_now.getMonth()+i+0,billingDate-1);var optionLabel=\"\".concat(monthNames[monthStartDate.getMonth()],\" \").concat(billingDate,\" ~ \").concat(monthNames[monthEndDate.getMonth()],\" \").concat(monthEndDate.getDate());var optionStartDate=monthStartDate.toISOString().slice(0,10);var optionEndDate=monthEndDate.toISOString().slice(0,10);_options.push({startDate:optionStartDate,endDate:optionEndDate,label:optionLabel});}setSelectedDateRange(_options.find(function(option){return option.startDate===startDate;})||_options[0]);setOptions(_options);}},[billingDate]);var handleDateRangeChange=function handleDateRangeChange(event){var selectedOption=options.find(function(option){return option.startDate===event.target.value;});setSelectedDateRange(selectedOption);setStartDate(selectedOption.startDate);setEndDate(selectedOption.endDate);localStorage.setItem(\"startDate\",selectedOption.startDate);localStorage.setItem(\"endDate\",selectedOption.endDate);// Call the handleDateRangeChange function passed from the parent component\nprops.onDateRangeChange(selectedOption);};var now=new Date();var yearNow=now.getFullYear();return/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"dateForm\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./image/blue_icon _calendar_.png\",alt:\"Calendar Icon\",className:\"calendar dateIcon\",width:\"72\",height:\"72\"}),/*#__PURE__*/_jsxs(\"span\",{children:[yearNow,\" /\"]}),/*#__PURE__*/_jsx(\"select\",{value:selectedDateRange?selectedDateRange.startDate:'',onChange:handleDateRangeChange,required:true,children:options.map(function(option){return/*#__PURE__*/_jsx(\"option\",{value:option.startDate,children:option.label},option.startDate);})})]})});}export default DateRangeForm;","map":{"version":3,"names":["React","useState","useEffect","axios","DateRangeForm","props","billingDate","setBillingDate","selectedDateRange","setSelectedDateRange","startDate","label","options","setOptions","localStorage","getItem","setStartDate","endDate","setEndDate","fetchBillingDate","sessionEmail","post","email","response","data","billing","monthNames","i","now","Date","monthStartDate","getFullYear","getMonth","monthEndDate","optionLabel","getDate","optionStartDate","toISOString","slice","optionEndDate","push","find","option","handleDateRangeChange","event","selectedOption","target","value","setItem","onDateRangeChange","yearNow","map"],"sources":["/Users/zoe/Desktop/Independent/cat/my-app/src/components/DateRangeForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n\nfunction DateRangeForm(props) {\n  const [billingDate, setBillingDate] = useState(null);\n  const [selectedDateRange, setSelectedDateRange] = useState(null);\n  const [options, setOptions] = useState([{ startDate: \"\", label: \"Choose date\" }]);\n  const [startDate, setStartDate] = useState(localStorage.getItem(\"startDate\"));\n  const [endDate, setEndDate] = useState(localStorage.getItem(\"endDate\"));\n\n  useEffect(() => {\n    const fetchBillingDate = async () => {\n      const sessionEmail = localStorage.getItem(\"email\");\n      const response = await axios.post('https://www.zoelindev.com/moneyCatBackend/dateRangeForm.php', { email: sessionEmail });\n      const data = response.data;\n      setBillingDate(data.billing);\n    };\n\n    fetchBillingDate();\n  }, []);\n\n  useEffect(() => {\n    if (billingDate) {\n      const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n      const options = [];\n\n      for (let i = 0; i < 13; i++) {\n        const now = new Date();\n        const monthStartDate = new Date(now.getFullYear(), now.getMonth() + i - 1, billingDate);\n        const monthEndDate = new Date(now.getFullYear(), now.getMonth() + i + 0, billingDate - 1);\n        const optionLabel = `${monthNames[monthStartDate.getMonth()]} ${billingDate} ~ ${monthNames[monthEndDate.getMonth()]} ${monthEndDate.getDate()}`;\n        const optionStartDate = monthStartDate.toISOString().slice(0, 10);\n        const optionEndDate = monthEndDate.toISOString().slice(0, 10);\n        options.push({\n          startDate: optionStartDate,\n          endDate: optionEndDate,\n          label: optionLabel\n        });\n      }\n\n      setSelectedDateRange(options.find(option => option.startDate === startDate) || options[0]);\n      setOptions(options);\n    }\n  }, [billingDate]);\n\n  const handleDateRangeChange = (event) => {\n    const selectedOption = options.find(option => option.startDate === event.target.value);\n    setSelectedDateRange(selectedOption);\n    setStartDate(selectedOption.startDate);\n    setEndDate(selectedOption.endDate);\n    localStorage.setItem(\"startDate\", selectedOption.startDate);\n    localStorage.setItem(\"endDate\", selectedOption.endDate);\n  \n    // Call the handleDateRangeChange function passed from the parent component\n    props.onDateRangeChange(selectedOption);\n  };\n  \n\n  const now = new Date();\n  const yearNow = now.getFullYear();\n\n  return (\n    <form>\n      <label className='dateForm'>\n        <img src=\"./image/blue_icon _calendar_.png\" alt=\"Calendar Icon\" className=\"calendar dateIcon\" width=\"72\" height=\"72\"/>\n        <span>{yearNow} /</span>\n        <select value={selectedDateRange ? selectedDateRange.startDate : ''} onChange={handleDateRangeChange} required>\n          {options.map(option => (\n            <option key={option.startDate} value={option.startDate}>{option.label}</option>\n          ))}\n        </select>\n      </label>\n    </form>\n  );\n}\n\n\nexport default DateRangeForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}